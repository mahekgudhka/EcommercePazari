<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pazari - Test Page</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .test-container {
            padding-top: 100px;
            min-height: 100vh;
            background: #f8f9fa;
        }
        
        .test-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .test-button {
            margin: 10px;
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .btn-primary { background: #667eea; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn-danger { background: #dc3545; color: white; }
        .btn-warning { background: #ffc107; color: #333; }
        .btn-info { background: #17a2b8; color: white; }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="./index.html">
                <img src="./image/WhatsApp_Image_2023-07-10_at_00.13.41-removebg-preview.png" alt="Pazari" height="40">
                <span class="ms-2">Pazari</span>
            </a>
            
            <div class="navbar-nav mx-auto">
                <div class="search-container">
                    <input type="search" class="form-control" placeholder="Search for products..." id="searchInput">
                    <button class="btn btn-outline-light ms-2" onclick="searchProducts()">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
            
            <div class="navbar-nav">
                <a class="nav-link" href="./wishlist.html">
                    <i class="fas fa-heart"></i> Wishlist
                    <span class="badge bg-danger" id="wishlistCount">0</span>
                </a>
                <a class="nav-link" href="./cart.html">
                    <i class="fas fa-shopping-cart"></i> Cart
                    <span class="badge bg-primary" id="cartCount">0</span>
                </a>
                <a class="nav-link" href="#" id="loginLink" onclick="showAuthModal()">
                    <i class="fas fa-user"></i> Login
                </a>
                <a class="nav-link d-none" href="./settings/settings.html" id="settingsLink">
                    <i class="fas fa-cog"></i> Settings
                </a>
                <a class="nav-link d-none" href="#" id="logoutLink" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </div>
        </div>
    </nav>

    <!-- Test Container -->
    <div class="test-container">
        <div class="container">
            <div class="test-card text-center">
                <h1><i class="fas fa-cogs me-3 text-primary"></i>Pazari Website Test</h1>
                <p class="lead">Test all the functionality of your e-commerce website</p>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="test-card">
                        <h3><i class="fas fa-user me-2"></i>Authentication Tests</h3>
                        <button class="btn test-button btn-primary" onclick="testLogin()">
                            <i class="fas fa-sign-in-alt me-2"></i>Test Login
                        </button>
                        <button class="btn test-button btn-success" onclick="testSignup()">
                            <i class="fas fa-user-plus me-2"></i>Test Signup
                        </button>
                        <button class="btn test-button btn-danger" onclick="testLogout()">
                            <i class="fas fa-sign-out-alt me-2"></i>Test Logout
                        </button>
                        <button class="btn test-button btn-warning" onclick="checkAuthStatus()">
                            <i class="fas fa-info-circle me-2"></i>Check Auth Status
                        </button>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="test-card">
                        <h3><i class="fas fa-shopping-cart me-2"></i>Cart & Wishlist Tests</h3>
                        <button class="btn test-button btn-primary" onclick="testAddToCart()">
                            <i class="fas fa-plus me-2"></i>Add to Cart
                        </button>
                        <button class="btn test-button btn-success" onclick="testAddToWishlist()">
                            <i class="fas fa-heart me-2"></i>Add to Wishlist
                        </button>
                        <button class="btn test-button btn-info" onclick="viewCartData()">
                            <i class="fas fa-eye me-2"></i>View Cart Data
                        </button>
                        <button class="btn test-button btn-warning" onclick="viewWishlistData()">
                            <i class="fas fa-eye me-2"></i>View Wishlist Data
                        </button>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="test-card">
                        <h3><i class="fas fa-database me-2"></i>Data Management</h3>
                        <button class="btn test-button btn-danger" onclick="clearAllData()">
                            <i class="fas fa-trash me-2"></i>Clear All Data
                        </button>
                        <button class="btn test-button btn-warning" onclick="resetDemoData()">
                            <i class="fas fa-redo me-2"></i>Reset Demo Data
                        </button>
                        <button class="btn test-button btn-info" onclick="exportData()">
                            <i class="fas fa-download me-2"></i>Export Data
                        </button>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="test-card">
                        <h3><i class="fas fa-link me-2"></i>Navigation Tests</h3>
                        <a href="./index.html" class="btn test-button btn-primary">
                            <i class="fas fa-home me-2"></i>Go to Home
                        </a>
                        <a href="./cart.html" class="btn test-button btn-success">
                            <i class="fas fa-shopping-cart me-2"></i>Go to Cart
                        </a>
                        <a href="./wishlist.html" class="btn test-button btn-danger">
                            <i class="fas fa-heart me-2"></i>Go to Wishlist
                        </a>
                        <a href="./settings/settings.html" class="btn test-button btn-warning">
                            <i class="fas fa-cog me-2"></i>Go to Settings
                        </a>
                    </div>
                </div>
            </div>

            <div class="test-card">
                <h3><i class="fas fa-info-circle me-2"></i>Current Status</h3>
                <div id="statusDisplay">
                    <p>Click the buttons above to test functionality...</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/main.js"></script>
    <script>
        // Initialize test page
        document.addEventListener('DOMContentLoaded', function() {
            loadCart();
            loadWishlist();
            updateNavigation();
            updateStatus();
        });

        function testLogin() {
            const email = 'demo@pazari.com';
            const password = 'password';
            
            if (login(email, password)) {
                showToast('Demo login successful!', 'success');
                updateNavigation();
                updateStatus();
            } else {
                showToast('Demo login failed!', 'error');
            }
        }

        function testSignup() {
            const userData = {
                id: Date.now(),
                firstName: 'Test',
                lastName: 'User',
                email: 'test@pazari.com',
                isLoggedIn: true
            };
            
            localStorage.setItem('pazariUser', JSON.stringify(userData));
            showToast('Test account created successfully!', 'success');
            updateNavigation();
            updateStatus();
        }

        function testLogout() {
            localStorage.removeItem('pazariUser');
            showToast('Logged out successfully!', 'success');
            updateNavigation();
            updateStatus();
        }

        function checkAuthStatus() {
            const userData = localStorage.getItem('pazariUser');
            if (userData) {
                const user = JSON.parse(userData);
                showToast(`Logged in as: ${user.firstName} ${user.lastName} (${user.email})`, 'info');
            } else {
                showToast('Not logged in', 'warning');
            }
        }

        function testAddToCart() {
            const productId = 1;
            if (addToCart(productId)) {
                showToast('Product added to cart!', 'success');
                loadCart();
                updateStatus();
            } else {
                showToast('Please login first to add to cart', 'error');
            }
        }

        function testAddToWishlist() {
            const productId = 2;
            if (addToWishlist(productId)) {
                showToast('Product added to wishlist!', 'success');
                loadWishlist();
                updateStatus();
            } else {
                showToast('Please login first to add to wishlist', 'error');
            }
        }

        function viewCartData() {
            const cartData = localStorage.getItem('pazariCart');
            if (cartData) {
                const cart = JSON.parse(cartData);
                showToast(`Cart has ${cart.length} items`, 'info');
                console.log('Cart Data:', cart);
            } else {
                showToast('Cart is empty', 'info');
            }
        }

        function viewWishlistData() {
            const wishlistData = localStorage.getItem('pazariWishlist');
            if (wishlistData) {
                const wishlist = JSON.parse(wishlistData);
                showToast(`Wishlist has ${wishlist.length} items`, 'info');
                console.log('Wishlist Data:', wishlist);
            } else {
                showToast('Wishlist is empty', 'info');
            }
        }

        function clearAllData() {
            if (confirm('Are you sure you want to clear all data? This cannot be undone!')) {
                localStorage.clear();
                showToast('All data cleared!', 'success');
                updateNavigation();
                updateStatus();
            }
        }

        function resetDemoData() {
            // Reset to demo state
            localStorage.removeItem('pazariUser');
            localStorage.removeItem('pazariCart');
            localStorage.removeItem('pazariWishlist');
            
            showToast('Demo data reset!', 'success');
            updateNavigation();
            updateStatus();
        }

        function exportData() {
            const data = {
                user: localStorage.getItem('pazariUser'),
                cart: localStorage.getItem('pazariCart'),
                wishlist: localStorage.getItem('pazariWishlist')
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = 'pazari-data.json';
            link.click();
            
            showToast('Data exported successfully!', 'success');
        }

        function updateStatus() {
            const statusDisplay = document.getElementById('statusDisplay');
            const userData = localStorage.getItem('pazariUser');
            const cartData = localStorage.getItem('pazariCart');
            const wishlistData = localStorage.getItem('pazariWishlist');
            
            let status = '<div class="row">';
            
            // User status
            status += '<div class="col-md-4">';
            status += '<h5><i class="fas fa-user me-2"></i>User Status</h5>';
            if (userData) {
                const user = JSON.parse(userData);
                status += `<p class="text-success"><strong>Logged in:</strong> ${user.firstName} ${user.lastName}</p>`;
                status += `<p><strong>Email:</strong> ${user.email}</p>`;
            } else {
                status += '<p class="text-warning"><strong>Not logged in</strong></p>';
            }
            status += '</div>';
            
            // Cart status
            status += '<div class="col-md-4">';
            status += '<h5><i class="fas fa-shopping-cart me-2"></i>Cart Status</h5>';
            if (cartData) {
                const cart = JSON.parse(cartData);
                const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
                status += `<p class="text-info"><strong>Items:</strong> ${totalItems}</p>`;
                status += `<p><strong>Products:</strong> ${cart.length}</p>`;
            } else {
                status += '<p class="text-muted"><strong>Empty</strong></p>';
            }
            status += '</div>';
            
            // Wishlist status
            status += '<div class="col-md-4">';
            status += '<h5><i class="fas fa-heart me-2"></i>Wishlist Status</h5>';
            if (wishlistData) {
                const wishlist = JSON.parse(wishlistData);
                status += `<p class="text-danger"><strong>Items:</strong> ${wishlist.length}</p>`;
            } else {
                status += '<p class="text-muted"><strong>Empty</strong></p>';
            }
            status += '</div>';
            
            status += '</div>';
            
            statusDisplay.innerHTML = status;
        }

        function loadCart() {
            const cartData = localStorage.getItem('pazariCart');
            if (cartData) {
                const cart = JSON.parse(cartData);
                const cartCount = document.getElementById('cartCount');
                if (cartCount) {
                    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
                    cartCount.textContent = totalItems;
                }
            }
        }

        function loadWishlist() {
            const wishlistData = localStorage.getItem('pazariWishlist');
            if (wishlistData) {
                const wishlist = JSON.parse(wishlistData);
                const wishlistCount = document.getElementById('wishlistCount');
                if (wishlistCount) {
                    wishlistCount.textContent = wishlist.length;
                }
            }
        }

        function updateNavigation() {
            const userData = localStorage.getItem('pazariUser');
            const loginLink = document.getElementById('loginLink');
            const settingsLink = document.getElementById('settingsLink');
            const logoutLink = document.getElementById('logoutLink');
            
            if (userData) {
                const user = JSON.parse(userData);
                if (user.isLoggedIn) {
                    if (loginLink) loginLink.classList.add('d-none');
                    if (settingsLink) settingsLink.classList.remove('d-none');
                    if (logoutLink) logoutLink.classList.remove('d-none');
                }
            } else {
                if (loginLink) loginLink.classList.remove('d-none');
                if (settingsLink) settingsLink.classList.add('d-none');
                if (logoutLink) logoutLink.classList.add('d-none');
            }
        }

        function logout() {
            localStorage.removeItem('pazariUser');
            updateNavigation();
            showToast('Logged out successfully!', 'success');
            updateStatus();
        }

        function searchProducts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            if (!searchTerm.trim()) return;
            
            showToast(`Searching for "${searchTerm}"...`, 'info');
        }

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `alert alert-${type === 'error' ? 'danger' : type === 'success' ? 'success' : 'info'} position-fixed`;
            toast.style.cssText = 'top: 20px; right: 20px; z-index: 1050; min-width: 300px;';
            toast.innerHTML = `
                <strong>Pazari Test:</strong> ${message}
                <button type="button" class="btn-close" onclick="this.parentElement.remove()"></button>
            `;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                if (toast.parentElement) {
                    toast.remove();
                }
            }, 5000);
        }

        // Search input enter key
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchProducts();
            }
        });
    </script>
</body>
</html>
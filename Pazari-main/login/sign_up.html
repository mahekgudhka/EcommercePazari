<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign Up - Pazari</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="../style.css">
  <style>
    .signup-container {
      min-height: 100vh;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    
    .signup-card {
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
      overflow: hidden;
      max-width: 500px;
      width: 100%;
    }
    
    .signup-header {
      background: linear-gradient(135deg, #004e4d 0%, #006666 100%);
      color: white;
      padding: 30px;
      text-align: center;
    }
    
    .signup-header img {
      width: 60px;
      height: auto;
      margin-bottom: 15px;
    }
    
    .signup-body {
      padding: 40px 30px;
    }
    
    .form-floating {
      margin-bottom: 20px;
    }
    
    .form-control {
      border-radius: 10px;
      border: 2px solid #e9ecef;
      padding: 15px;
      height: auto;
    }
    
    .form-control:focus {
      border-color: #004e4d;
      box-shadow: 0 0 0 0.2rem rgba(0,78,77,0.25);
    }
    
    .form-control.is-invalid {
      border-color: #dc3545;
    }
    
    .form-control.is-valid {
      border-color: #28a745;
    }
    
    .invalid-feedback {
      display: block;
      font-size: 0.875rem;
      color: #dc3545;
      margin-top: 5px;
    }
    
    .valid-feedback {
      display: block;
      font-size: 0.875rem;
      color: #28a745;
      margin-top: 5px;
    }
    
    .btn-signup {
      background: linear-gradient(135deg, #004e4d 0%, #006666 100%);
      border: none;
      border-radius: 25px;
      padding: 15px;
      font-weight: 600;
      width: 100%;
      margin-bottom: 20px;
    }
    
    .btn-signup:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }
    
    .btn-signup:disabled {
      opacity: 0.6;
      transform: none;
      box-shadow: none;
    }
    
    .divider {
      text-align: center;
      margin: 20px 0;
      position: relative;
    }
    
    .divider::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      height: 1px;
      background: #e9ecef;
    }
    
    .divider span {
      background: white;
      padding: 0 15px;
      color: #6c757d;
    }
    
    .social-signup {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
    }
    
    .btn-social {
      flex: 1;
      border-radius: 25px;
      padding: 12px;
      font-weight: 600;
      border: 2px solid #e9ecef;
      background: white;
      color: #333;
      transition: all 0.3s ease;
    }
    
    .btn-social:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .btn-google:hover {
      border-color: #db4437;
      color: #db4437;
    }
    
    .btn-facebook:hover {
      border-color: #4267B2;
      color: #4267B2;
    }
    
    .login-link {
      text-align: center;
      margin-top: 20px;
    }
    
    .login-link a {
      color: #004e4d;
      text-decoration: none;
      font-weight: 600;
    }
    
    .login-link a:hover {
      text-decoration: underline;
    }
    
    .password-strength {
      margin-top: 10px;
    }
    
    .strength-bar {
      height: 5px;
      border-radius: 3px;
      margin-bottom: 5px;
      transition: all 0.3s ease;
    }
    
    .strength-weak { background: #dc3545; width: 25%; }
    .strength-fair { background: #ffc107; width: 50%; }
    .strength-good { background: #17a2b8; width: 75%; }
    .strength-strong { background: #28a745; width: 100%; }
    
    .strength-text {
      font-size: 0.8rem;
      color: #6c757d;
    }
  </style>
</head>
<body>
  <div class="signup-container">
    <div class="signup-card">
      <div class="signup-header">
        <img src="../image/WhatsApp_Image_2023-07-10_at_00.13.41-removebg-preview.png" alt="Pazari">
        <h3 class="mb-0">Join Pazari!</h3>
        <p class="mb-0">Create your account and start shopping</p>
      </div>
      
      <div class="signup-body">
        <form id="signupForm" onsubmit="handleSignup(event)" novalidate>
          <div class="row">
            <div class="col-md-6">
              <div class="form-floating">
                <input type="text" class="form-control" id="firstName" placeholder="First Name" required>
                <label for="firstName">First Name</label>
                <div class="invalid-feedback">Please enter your first name.</div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-floating">
                <input type="text" class="form-control" id="lastName" placeholder="Last Name" required>
                <label for="lastName">Last Name</label>
                <div class="invalid-feedback">Please enter your last name.</div>
              </div>
            </div>
          </div>
          
          <div class="form-floating">
            <input type="email" class="form-control" id="email" placeholder="Email address" required>
            <label for="email">Email address</label>
            <div class="invalid-feedback">Please enter a valid email address.</div>
          </div>
          
          <div class="form-floating">
            <input type="tel" class="form-control" id="phone" placeholder="Phone number" required>
            <label for="phone">Phone number</label>
            <div class="invalid-feedback">Please enter a valid phone number.</div>
          </div>
          
          <div class="form-floating">
            <input type="password" class="form-control" id="password" placeholder="Password" required>
            <label for="password">Password</label>
            <div class="password-strength">
              <div class="strength-bar" id="strengthBar"></div>
              <div class="strength-text" id="strengthText">Password strength</div>
            </div>
            <div class="invalid-feedback">Password must be at least 8 characters long.</div>
          </div>
          
          <div class="form-floating">
            <input type="password" class="form-control" id="confirmPassword" placeholder="Confirm Password" required>
            <label for="confirmPassword">Confirm Password</label>
            <div class="invalid-feedback">Passwords do not match.</div>
          </div>
          
          <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" id="terms" required>
            <label class="form-check-label" for="terms">
              I agree to the <a href="#" class="text-decoration-none">Terms of Service</a> and <a href="#" class="text-decoration-none">Privacy Policy</a>
            </label>
            <div class="invalid-feedback">You must agree to the terms and conditions.</div>
          </div>
          
          <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" id="newsletter">
            <label class="form-check-label" for="newsletter">
              Subscribe to our newsletter for updates and offers
            </label>
          </div>
          
          <button type="submit" class="btn btn-primary btn-signup" id="signupBtn">
            <i class="fas fa-user-plus me-2"></i>Create Account
          </button>
        </form>
        
        <div class="divider">
          <span>or sign up with</span>
        </div>
        
        <div class="social-signup">
          <button class="btn btn-social btn-google">
            <i class="fab fa-google me-2"></i>Google
          </button>
          <button class="btn btn-social btn-facebook">
            <i class="fab fa-facebook-f me-2"></i>Facebook
          </button>
        </div>
        
        <div class="login-link">
          <p class="mb-0">Already have an account? <a href="login.html">Sign in here</a></p>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../js/main.js"></script>
  <script>
    // Form validation and handling
    const form = document.getElementById('signupForm');
    const password = document.getElementById('password');
    const confirmPassword = document.getElementById('confirmPassword');
    const strengthBar = document.getElementById('strengthBar');
    const strengthText = document.getElementById('strengthText');
    
    // Password strength checker
    password.addEventListener('input', function() {
      const value = this.value;
      const strength = checkPasswordStrength(value);
      updatePasswordStrength(strength);
    });
    
    // Confirm password validation
    confirmPassword.addEventListener('input', function() {
      if (this.value !== password.value) {
        this.classList.add('is-invalid');
        this.classList.remove('is-valid');
      } else {
        this.classList.remove('is-invalid');
        this.classList.add('is-valid');
      }
    });
    
    // Real-time validation
    form.querySelectorAll('input[required]').forEach(input => {
      input.addEventListener('blur', function() {
        validateField(this);
      });
      
      input.addEventListener('input', function() {
        if (this.classList.contains('is-invalid')) {
          validateField(this);
        }
      });
    });
    
    function validateField(field) {
      const value = field.value.trim();
      
      if (field.type === 'email') {
        const isValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value);
        field.classList.toggle('is-valid', isValid);
        field.classList.toggle('is-invalid', !isValid);
      } else if (field.type === 'tel') {
        const isValid = /^[\+]?[1-9][\d]{0,15}$/.test(value.replace(/\s/g, ''));
        field.classList.toggle('is-valid', isValid);
        field.classList.toggle('is-invalid', !isValid);
      } else if (field.type === 'password') {
        const isValid = value.length >= 8;
        field.classList.toggle('is-valid', isValid);
        field.classList.toggle('is-invalid', !isValid);
      } else {
        const isValid = value.length > 0;
        field.classList.toggle('is-valid', isValid);
        field.classList.toggle('is-invalid', !isValid);
      }
    }
    
    function checkPasswordStrength(password) {
      let score = 0;
      
      if (password.length >= 8) score++;
      if (/[a-z]/.test(password)) score++;
      if (/[A-Z]/.test(password)) score++;
      if (/[0-9]/.test(password)) score++;
      if (/[^A-Za-z0-9]/.test(password)) score++;
      
      if (score < 2) return 'weak';
      if (score < 3) return 'fair';
      if (score < 4) return 'good';
      return 'strong';
    }
    
    function updatePasswordStrength(strength) {
      strengthBar.className = `strength-bar strength-${strength}`;
      
      const strengthLabels = {
        weak: 'Weak - Add more characters and variety',
        fair: 'Fair - Add uppercase letters and numbers',
        good: 'Good - Add special characters',
        strong: 'Strong password!'
      };
      
      strengthText.textContent = strengthLabels[strength];
      strengthText.className = `strength-text text-${strength === 'weak' ? 'danger' : strength === 'fair' ? 'warning' : strength === 'good' ? 'info' : 'success'}`;
    }
    
    function handleSignup(event) {
      event.preventDefault();
      
      // Validate all fields
      let isValid = true;
      form.querySelectorAll('input[required]').forEach(input => {
        validateField(input);
        if (input.classList.contains('is-invalid')) {
          isValid = false;
        }
      });
      
      // Check password match
      if (password.value !== confirmPassword.value) {
        confirmPassword.classList.add('is-invalid');
        isValid = false;
      }
      
      if (!isValid) {
        showToast('Please fix the errors in the form.', 'error');
        return;
      }
      
      // Show loading state
      const submitBtn = document.getElementById('signupBtn');
      const originalText = submitBtn.innerHTML;
      submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Creating Account...';
      submitBtn.disabled = true;
      
      // Simulate API call
      setTimeout(() => {
        // In real app, this would send data to backend
        const userData = {
          firstName: document.getElementById('firstName').value,
          lastName: document.getElementById('lastName').value,
          email: document.getElementById('email').value,
          phone: document.getElementById('phone').value,
          newsletter: document.getElementById('newsletter').checked
        };
        
        // Save user data (in real app, this would be handled by backend)
        localStorage.setItem('pazariNewUser', JSON.stringify(userData));
        
        showToast('Account created successfully! Redirecting to login...', 'success');
        
        setTimeout(() => {
          window.location.href = 'login.html';
        }, 2000);
      }, 1500);
    }
    
    // Simple toast function
    function showToast(message, type = 'info') {
      const toast = document.createElement('div');
      toast.className = `alert alert-${type === 'error' ? 'danger' : type === 'success' ? 'success' : 'info'} position-fixed`;
      toast.style.cssText = 'top: 20px; right: 20px; z-index: 1050; min-width: 300px;';
      toast.innerHTML = `
        <strong>Pazari:</strong> ${message}
        <button type="button" class="btn-close" onclick="this.parentElement.remove()"></button>
      `;
      
      document.body.appendChild(toast);
      
      setTimeout(() => {
        if (toast.parentElement) {
          toast.remove();
        }
      }, 5000);
    }
    
    // Check if user is already logged in
    document.addEventListener('DOMContentLoaded', function() {
      const userData = localStorage.getItem('pazariUser');
      if (userData) {
        const user = JSON.parse(userData);
        if (user.isLoggedIn) {
          window.location.href = '../index.html';
        }
      }
    });
  </script>
</body>
</html>
